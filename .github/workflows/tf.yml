name: Tfsec Checks on Terraform Code

# Only trigger, when the build workflow succeeded
on:
  pull_request:
      
permissions: read-all

jobs:
  tfsec-checks:
      runs-on: ubuntu-latest
      steps:
    
# Checkout Repository
      - name : Check out Git Repository
        uses: actions/checkout@v2
      
# Tfsec - Security scanner for your Terraform code
      - name: Run Tfsec
        uses: aquasecurity/tfsec-action@v1.0.3

# Tfsec - PR Commentor

      - name: tfsec
        uses: tfsec/tfsec-pr-commenter-action@main
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
